<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MTG Motion Graph â€“ Tournament Rankings</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cinzel:wght@700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/recap.css" />
</head>
<body>
  <h1><span id="recap-trigger">âš”</span> MTG Tournament Rankings</h1>
  <p class="subtitle">Cumulative points across tournament dates â€“ bar chart race</p>

  <div class="view-nav">
    <!-- Row 1: Player Ranking (always visible) -->
    <div class="view-row view-row-main">
      <button class="view-btn active" id="btn-ranking">ğŸ† Player Ranking</button>
    </div>

    <!-- Row 2: Category toggles -->
    <div class="view-row view-row-categories">
      <button class="category-btn" id="cat-player">âš” Player Views</button>
      <button class="category-btn" id="cat-deck">ğŸƒ Deck Views</button>
    </div>

    <!-- Row 3: Sub-views (hidden by default) -->
    <div class="view-row view-row-sub" id="sub-player" style="display:none">
      <button class="view-btn" id="btn-podium">ğŸ¥‡ 1st Place</button>
      <button class="view-btn" id="btn-top3finishes">ğŸ… Top 3 Finishes</button>
      <button class="view-btn" id="btn-winrate">ğŸ“ˆ Win Rate</button>
      <button class="view-btn" id="btn-attendance">ğŸ“… Attendance</button>
      <button class="view-btn" id="btn-playerdrawrate">ğŸ¤ Draw Rate</button>
      <button class="view-btn" id="btn-deckdiv">ğŸ² Deck Diversity</button>
    </div>

    <div class="view-row view-row-sub" id="sub-deck" style="display:none">
      <button class="view-btn" id="btn-deckwins">ğŸƒ Deck Wins</button>
      <button class="view-btn" id="btn-deckpop">ğŸ“Š Popularity</button>
      <button class="view-btn" id="btn-deckdrawrate">ğŸ¤ Draw Rate</button>
      <button class="view-btn" id="btn-deckwinrate">ğŸ¯ Win Rate</button>
      <button class="view-btn" id="btn-deckcount">ğŸ”¢ Deck Count</button>
    </div>
  </div>

  <div class="controls">
    <button id="btn-play">â–¶ Play</button>
    <button id="btn-pause">â¸ Pause</button>
    <button id="btn-reset">â†º Reset</button>
    <span class="speed-label">Speed:</span>
    <button class="speed-btn" data-speed="2000">Slow</button>
    <button class="speed-btn active" data-speed="1000">Normal</button>
    <button class="speed-btn" data-speed="400">Fast</button>
    <span class="speed-label">â”‚</span>
    <span class="speed-label">Month:</span>
    <select id="month-filter">
      <option value="">All</option>
    </select>
  </div>

  <div id="chart-container">
    <div class="date-display" id="date-display"></div>
    <div class="tooltip" id="tooltip"></div>
    <svg id="chart"></svg>
  </div>

  <div class="legend" id="legend"></div>

  <!-- Recap overlay -->
  <div class="recap-overlay" id="recap-overlay">
    <div class="recap-modal">
      <div class="recap-header">
        <select id="recap-player">
          <option value="">Choose a playerâ€¦</option>
        </select>
        <button class="recap-close" id="recap-close">âœ•</button>
      </div>
      <div class="recap-slide-area">
        <div id="recap-slide-container">
          <div class="recap-slide recap-empty"><div class="recap-label">Select a player above</div></div>
        </div>
      </div>
      <div class="recap-footer">
        <button class="recap-nav-btn" id="recap-prev" disabled>â† Prev</button>
        <div class="recap-dots" id="recap-dots"></div>
        <button class="recap-nav-btn" id="recap-next">Next â†’</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
